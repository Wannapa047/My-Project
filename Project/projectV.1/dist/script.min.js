"use strict";var model,videoElement=document.querySelector(".input_video"),canvasElement=document.querySelector(".output_canvas"),outputText=document.getElementById("outputText"),canvasCtx=canvasElement.getContext("2d"),holistic=new Holistic({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/holistic/".concat(e)}});function loadModel(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(tf.loadLayersModel("models/model.json"));case 3:model=e.sent,console.log("✅ Model Loaded Successfully!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("❌ Failed to load model:",e.t0);case 10:case"end":return e.stop()}},null,null,[[0,7]])}function onResults(e){canvasCtx.clearRect(0,0,canvasElement.width,canvasElement.height),canvasCtx.drawImage(e.image,0,0,canvasElement.width,canvasElement.height),e.rightHandLandmarks&&predictGesture(e.rightHandLandmarks.map(function(e){return[e.x,e.y,e.z]}))}function predictGesture(t){var n,r,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(model){e.next=3;break}return console.warn("⚠️ Model is not loaded yet."),e.abrupt("return");case 3:n=tf.tensor([t.flat()]).reshape([1,63]),r=model.predict(n),a=r.argMax(-1).dataSync()[0],o=["สวัสดี","ขอบคุณ","รัก"],outputText.innerText=o[a]||"ไม่รู้จัก",n.dispose(),r.dispose();case 10:case"end":return e.stop()}})}function setupCamera(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:new Camera(videoElement,{onFrame:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(holistic.send({image:videoElement}));case 2:case"end":return e.stop()}})},width:640,height:480}).start();case 2:case"end":return e.stop()}})}function loadScripts(){var t,n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a[n],e.next=3,regeneratorRuntime.awrap(new Promise(function(e,t){var n=document.createElement("script");n.src=r,n.onload=e,n.onerror=t,document.body.appendChild(n)}));case 3:case"end":return e.stop()}})},n=0,a=["https://cdn.jsdelivr.net/npm/@mediapipe/holistic/holistic.js","https://cdn.jsdelivr.net/npm/@tensorflow/tfjs","https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"];case 3:if(n<a.length)return e.next=6,regeneratorRuntime.awrap(t());e.next=9;break;case 6:n++,e.next=3;break;case 9:return console.log("✅ All scripts loaded!"),e.next=12,regeneratorRuntime.awrap(loadModel());case 12:setupCamera();case 13:case"end":return e.stop()}})}holistic.setOptions({modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!0,smoothSegmentation:!0,refineFaceLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),holistic.onResults(onResults),window.onload=loadScripts;
//# sourceMappingURL=script.min.js.map
