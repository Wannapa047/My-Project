{"version":3,"sources":["record_data.js"],"names":["testSupport","supportedDevices","deviceDetector","DeviceDetector","detectedDevice","parse","navigator","userAgent","some","device","RegExp","client","test","name","alert","videoElement","document","querySelector","canvasElement","canvasCtx","getContext","outputText","getElementById","holistic","window","Holistic","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","refineFaceLandmarks","minDetectionConfidence","minTrackingConfidence","distance","p1","p2","Math","sqrt","x","y","detectGesture","leftHand","rightHand","wristRight","indexRight","thumbRight","middleRight","wristLeft","indexLeft","thumbLeft","middleLeft","pinkyRight","ringRight","onResults","results","clearRect","width","height","drawImage","image","rightHandLandmarks","forEach","point","beginPath","arc","PI","fillStyle","fill","leftHandLandmarks","gesture","innerText","camera","Camera","onFrame","send","start"],"mappings":";;AAAA;;;;AAEA;AACA,SAASA,WAAT,CAAqBC,gBAArB,EAAuC;AACrC,MAAMC,cAAc,GAAG,IAAIC,4BAAJ,EAAvB;AACA,MAAMC,cAAc,GAAGF,cAAc,CAACG,KAAf,CAAqBC,SAAS,CAACC,SAA/B,CAAvB;;AACA,MAAI,CAACN,gBAAgB,CAACO,IAAjB,CAAsB,UAAAC,MAAM;AAAA,WAAI,IAAIC,MAAJ,YAAeD,MAAM,CAACE,MAAtB,QAAiCC,IAAjC,CAAsCR,cAAc,CAACO,MAAf,CAAsBE,IAA5D,CAAJ;AAAA,GAA5B,CAAL,EAAyG;AACvGC,IAAAA,KAAK,iCAA0BV,cAAc,CAACO,MAAf,CAAsBE,IAAhD,8BAAL;AACD;AACF;;AACDb,WAAW,CAAC,CAAC;AAAEW,EAAAA,MAAM,EAAE;AAAV,CAAD,CAAD,CAAX,C,CAEA;;AACA,IAAMI,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAArB;AACA,IAAMC,aAAa,GAAGF,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAtB;AACA,IAAME,SAAS,GAAGD,aAAa,CAACE,UAAd,CAAyB,IAAzB,CAAlB;AACA,IAAMC,UAAU,GAAGL,QAAQ,CAACM,cAAT,CAAwB,YAAxB,CAAnB;AAEA,IAAMC,QAAQ,GAAG,IAAIC,MAAM,CAACC,QAAX,CAAoB;AACnCC,EAAAA,UAAU,EAAE,oBAAAC,IAAI;AAAA,6EAA+DA,IAA/D;AAAA;AADmB,CAApB,CAAjB;AAIAJ,QAAQ,CAACK,UAAT,CAAoB;AAClBC,EAAAA,eAAe,EAAE,CADC;AAElBC,EAAAA,eAAe,EAAE,IAFC;AAGlBC,EAAAA,kBAAkB,EAAE,IAHF;AAIlBC,EAAAA,mBAAmB,EAAE,IAJH;AAKlBC,EAAAA,sBAAsB,EAAE,GALN;AAMlBC,EAAAA,qBAAqB,EAAE;AANL,CAApB;;AASA,SAASC,QAAT,CAAkBC,EAAlB,EAAsBC,EAAtB,EAA0B;AACxB,SAAOC,IAAI,CAACC,IAAL,CAAU,SAACH,EAAE,CAACI,CAAH,GAAOH,EAAE,CAACG,CAAX,EAAiB,CAAjB,aAAsBJ,EAAE,CAACK,CAAH,GAAOJ,EAAE,CAACI,CAAhC,EAAsC,CAAtC,CAAV,CAAP;AACD;;AAED,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,SAAjC,EAA4C;AAC1C,MAAIA,SAAS,IAAID,QAAjB,EAA2B;AACzB,QAAME,UAAU,GAAGD,SAAS,CAAC,CAAD,CAA5B;AACA,QAAME,UAAU,GAAGF,SAAS,CAAC,CAAD,CAA5B;AACA,QAAMG,UAAU,GAAGH,SAAS,CAAC,CAAD,CAA5B;AACA,QAAMI,WAAW,GAAGJ,SAAS,CAAC,EAAD,CAA7B;AACA,QAAMK,SAAS,GAAGN,QAAQ,CAAC,CAAD,CAA1B;AACA,QAAMO,SAAS,GAAGP,QAAQ,CAAC,CAAD,CAA1B;AACA,QAAMQ,SAAS,GAAGR,QAAQ,CAAC,CAAD,CAA1B;AACA,QAAMS,UAAU,GAAGT,QAAQ,CAAC,EAAD,CAA3B,CARyB,CAUzB;;AACA,QAAIE,UAAU,CAACJ,CAAX,GAAe,GAAf,IAAsBN,QAAQ,CAACW,UAAD,EAAaD,UAAb,CAAR,GAAmC,GAA7D,EAAkE;AAChE,aAAO,OAAP,CADgE,CAC/C;AAClB,KAbwB,CAezB;;;AACA,QAAIA,UAAU,CAACJ,CAAX,GAAe,GAAf,IAAsBQ,SAAS,CAACR,CAAV,GAAc,GAApC,IAA2CN,QAAQ,CAACW,UAAD,EAAaD,UAAb,CAAR,GAAmC,IAA9E,IAAsFV,QAAQ,CAACe,SAAD,EAAYD,SAAZ,CAAR,GAAiC,IAAvH,IACAd,QAAQ,CAACY,UAAD,EAAaD,UAAb,CAAR,GAAmC,IADnC,IAC2CX,QAAQ,CAACgB,SAAD,EAAYD,SAAZ,CAAR,GAAiC,IADhF,EACsF;AACpF,aAAO,OAAP,CADoF,CACnE;AAClB,KAnBwB,CAqBzB;;;AACA,QAAIL,UAAU,CAACJ,CAAX,GAAe,GAAf,IAAsBN,QAAQ,CAACU,UAAD,EAAaC,UAAb,CAAR,GAAmC,IAA7D,EAAmE;AACjE,aAAO,QAAP;AACD;;AACD,QAAIC,UAAU,CAACN,CAAX,GAAeK,UAAU,CAACL,CAA1B,IAA+BK,UAAU,CAACL,CAAX,GAAeO,WAAW,CAACP,CAA9D,EAAiE;AAC/D,aAAO,KAAP;AACD;;AACD,QAAIM,UAAU,CAACN,CAAX,GAAeK,UAAU,CAACL,CAA1B,IAA+BK,UAAU,CAACL,CAAX,GAAeO,WAAW,CAACP,CAA9D,EAAiE;AAC/D,aAAO,KAAP;AACD;;AACD,QAAIN,QAAQ,CAACY,UAAD,EAAaM,UAAb,CAAR,GAAmC,IAAnC,IAA2ClB,QAAQ,CAACW,UAAD,EAAaO,UAAb,CAAR,GAAmC,IAAlF,EAAwF;AACtF,aAAO,MAAP;AACD;;AACD,QAAIN,UAAU,CAACN,CAAX,GAAe,GAAf,IAAsBI,UAAU,CAACJ,CAAX,GAAe,GAAzC,EAA8C;AAC5C,aAAO,OAAP;AACD;;AACD,QAAIN,QAAQ,CAACW,UAAD,EAAaE,WAAb,CAAR,GAAoC,IAApC,IAA4Cb,QAAQ,CAACa,WAAD,EAAcM,SAAd,CAAR,GAAmC,IAAnF,EAAyF;AACvF,aAAO,QAAP;AACD;;AACD,QAAInB,QAAQ,CAACY,UAAD,EAAaD,UAAb,CAAR,GAAmC,GAAnC,IAA0CX,QAAQ,CAACW,UAAD,EAAaE,WAAb,CAAR,GAAoC,GAAlF,EAAuF;AACrF,aAAO,KAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD;;AAED,SAASO,SAAT,CAAmBC,OAAnB,EAA4B;AAC1BrC,EAAAA,SAAS,CAACsC,SAAV,CAAoB,CAApB,EAAuB,CAAvB,EAA0BvC,aAAa,CAACwC,KAAxC,EAA+CxC,aAAa,CAACyC,MAA7D;AACAxC,EAAAA,SAAS,CAACyC,SAAV,CAAoBJ,OAAO,CAACK,KAA5B,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC3C,aAAa,CAACwC,KAAvD,EAA8DxC,aAAa,CAACyC,MAA5E;;AAEA,MAAIH,OAAO,CAACM,kBAAZ,EAAgC;AAC9BN,IAAAA,OAAO,CAACM,kBAAR,CAA2BC,OAA3B,CAAmC,UAAAC,KAAK,EAAI;AAC1C7C,MAAAA,SAAS,CAAC8C,SAAV;AACA9C,MAAAA,SAAS,CAAC+C,GAAV,CAAcF,KAAK,CAACxB,CAAN,GAAUtB,aAAa,CAACwC,KAAtC,EAA6CM,KAAK,CAACvB,CAAN,GAAUvB,aAAa,CAACyC,MAArE,EAA6E,CAA7E,EAAgF,CAAhF,EAAmF,IAAIrB,IAAI,CAAC6B,EAA5F;AACAhD,MAAAA,SAAS,CAACiD,SAAV,GAAsB,MAAtB;AACAjD,MAAAA,SAAS,CAACkD,IAAV;AACD,KALD;AAMD;;AAED,MAAIb,OAAO,CAACc,iBAAZ,EAA+B;AAC7Bd,IAAAA,OAAO,CAACc,iBAAR,CAA0BP,OAA1B,CAAkC,UAAAC,KAAK,EAAI;AACzC7C,MAAAA,SAAS,CAAC8C,SAAV;AACA9C,MAAAA,SAAS,CAAC+C,GAAV,CAAcF,KAAK,CAACxB,CAAN,GAAUtB,aAAa,CAACwC,KAAtC,EAA6CM,KAAK,CAACvB,CAAN,GAAUvB,aAAa,CAACyC,MAArE,EAA6E,CAA7E,EAAgF,CAAhF,EAAmF,IAAIrB,IAAI,CAAC6B,EAA5F;AACAhD,MAAAA,SAAS,CAACiD,SAAV,GAAsB,KAAtB;AACAjD,MAAAA,SAAS,CAACkD,IAAV;AACD,KALD;AAMD;;AAED,MAAIb,OAAO,CAACc,iBAAR,IAA6Bd,OAAO,CAACM,kBAAzC,EAA6D;AAC3D,QAAMS,OAAO,GAAG7B,aAAa,CAACc,OAAO,CAACc,iBAAT,EAA4Bd,OAAO,CAACM,kBAApC,CAA7B;;AACA,QAAIS,OAAJ,EAAa;AACXlD,MAAAA,UAAU,CAACmD,SAAX,2EAAsCD,OAAtC;AACD;AACF;AACF;;AAEDhD,QAAQ,CAACgC,SAAT,CAAmBA,SAAnB;AAEA,IAAMkB,MAAM,GAAG,IAAIC,MAAJ,CAAW3D,YAAX,EAAyB;AACtC4D,EAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CACDpD,QAAQ,CAACqD,IAAT,CAAc;AAAEf,cAAAA,KAAK,EAAE9C;AAAT,aAAd,CADC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAD6B;AAItC2C,EAAAA,KAAK,EAAE,GAJ+B;AAKtCC,EAAAA,MAAM,EAAE;AAL8B,CAAzB,CAAf;AAOAc,MAAM,CAACI,KAAP","sourcesContent":["import DeviceDetector from \"https://cdn.skypack.dev/device-detector-js@2.2.10\";\r\n\r\n// ตรวจสอบว่าใช้ Chrome หรือไม่\r\nfunction testSupport(supportedDevices) {\r\n  const deviceDetector = new DeviceDetector();\r\n  const detectedDevice = deviceDetector.parse(navigator.userAgent);\r\n  if (!supportedDevices.some(device => new RegExp(`^${device.client}$`).test(detectedDevice.client.name))) {\r\n    alert(`This demo, running on ${detectedDevice.client.name}, is not well supported.`);\r\n  }\r\n}\r\ntestSupport([{ client: \"Chrome\" }]);\r\n\r\n// โหลด MediaPipe\r\nconst videoElement = document.querySelector(\".input_video\");\r\nconst canvasElement = document.querySelector(\".output_canvas\");\r\nconst canvasCtx = canvasElement.getContext(\"2d\");\r\nconst outputText = document.getElementById(\"outputText\");\r\n\r\nconst holistic = new window.Holistic({\r\n  locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/holistic@latest/${file}`,\r\n});\r\n\r\nholistic.setOptions({\r\n  modelComplexity: 1,\r\n  smoothLandmarks: true,\r\n  enableSegmentation: true,\r\n  refineFaceLandmarks: true,\r\n  minDetectionConfidence: 0.9,\r\n  minTrackingConfidence: 0.9,\r\n});\r\n\r\nfunction distance(p1, p2) {\r\n  return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\n}\r\n\r\nfunction detectGesture(leftHand, rightHand) {\r\n  if (rightHand && leftHand) {\r\n    const wristRight = rightHand[0];\r\n    const indexRight = rightHand[8];\r\n    const thumbRight = rightHand[4];\r\n    const middleRight = rightHand[12];\r\n    const wristLeft = leftHand[0];\r\n    const indexLeft = leftHand[8];\r\n    const thumbLeft = leftHand[4];\r\n    const middleLeft = leftHand[12];\r\n\r\n    // ตรวจจับคำว่า \"เศร้า\" จากการเคลื่อนไหวมือจากหน้าผากลง\r\n    if (wristRight.y < 0.2 && distance(indexRight, wristRight) > 0.1) {\r\n      return \"เศร้า\";  // หากมือเคลื่อนจากหน้าผากลงไป\r\n    }\r\n\r\n    // ตรวจจับคำว่า \"ขอโทษ\" จากการยกมือขึ้นพนม\r\n    if (wristRight.y < 0.2 && wristLeft.y < 0.2 && distance(indexRight, wristRight) < 0.05 && distance(indexLeft, wristLeft) < 0.05 &&\r\n        distance(thumbRight, indexRight) < 0.05 && distance(thumbLeft, indexLeft) < 0.05) {\r\n      return \"ขอโทษ\";  // ตรวจจับจากการยกมือขึ้นในท่าพนมมือ\r\n    }\r\n\r\n    // เงื่อนไขท่าทางอื่นๆ ที่มีอยู่แล้ว\r\n    if (wristRight.y < 0.3 && distance(wristRight, indexRight) < 0.05) {\r\n      return \"สวัสดี\";\r\n    }\r\n    if (thumbRight.y < indexRight.y && indexRight.y < middleRight.y) {\r\n      return \"ใช่\";\r\n    }\r\n    if (thumbRight.y > indexRight.y && indexRight.y > middleRight.y) {\r\n      return \"ไม่\";\r\n    }\r\n    if (distance(thumbRight, pinkyRight) < 0.05 && distance(indexRight, pinkyRight) < 0.05) {\r\n      return \"โอเค\";\r\n    }\r\n    if (thumbRight.y < 0.4 && wristRight.y < 0.5) {\r\n      return \"ขอบใจ\";\r\n    }\r\n    if (distance(indexRight, middleRight) < 0.03 && distance(middleRight, ringRight) < 0.03) {\r\n      return \"เยี่ยม\";\r\n    }\r\n    if (distance(thumbRight, indexRight) > 0.1 && distance(indexRight, middleRight) > 0.1) {\r\n      return \"รัก\";\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction onResults(results) {\r\n  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\r\n  canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\r\n\r\n  if (results.rightHandLandmarks) {\r\n    results.rightHandLandmarks.forEach(point => {\r\n      canvasCtx.beginPath();\r\n      canvasCtx.arc(point.x * canvasElement.width, point.y * canvasElement.height, 5, 0, 2 * Math.PI);\r\n      canvasCtx.fillStyle = \"blue\";\r\n      canvasCtx.fill();\r\n    });\r\n  }\r\n\r\n  if (results.leftHandLandmarks) {\r\n    results.leftHandLandmarks.forEach(point => {\r\n      canvasCtx.beginPath();\r\n      canvasCtx.arc(point.x * canvasElement.width, point.y * canvasElement.height, 5, 0, 2 * Math.PI);\r\n      canvasCtx.fillStyle = \"red\";\r\n      canvasCtx.fill();\r\n    });\r\n  }\r\n\r\n  if (results.leftHandLandmarks || results.rightHandLandmarks) {\r\n    const gesture = detectGesture(results.leftHandLandmarks, results.rightHandLandmarks);\r\n    if (gesture) {\r\n      outputText.innerText = `แปลภาษามือ: ${gesture}`;\r\n    }\r\n  }\r\n}\r\n\r\nholistic.onResults(onResults);\r\n\r\nconst camera = new Camera(videoElement, {\r\n  onFrame: async () => {\r\n    await holistic.send({ image: videoElement });\r\n  },\r\n  width: 640,\r\n  height: 480,\r\n});\r\ncamera.start();\r\n"],"file":"record_data.dev.js"}