{"version":3,"sources":["record_data.js"],"names":["_deviceDetectorJs","_interopRequireDefault","require","testSupport","supportedDevices","detectedDevice","DeviceDetector","parse","navigator","userAgent","some","device","RegExp","concat","client","test","name","alert","videoElement","document","querySelector","canvasCtx","canvasElement","getContext","outputText","getElementById","window","Holistic","file","holistic","setOptions","p2","modelComplexity","Math","pow","p1","x","y","refineFaceLandmarks","leftHand","rightHand","minDetectionConfidence","minTrackingConfidence","indexRight","thumbRight","distance","indexLeft","thumbLeft","wristRight","wristLeft","middleLeft","middleRight","pinkyRight","ringRight","onResults","results","clearRect","width","height","rightHandLandmarks","forEach","point","beginPath","arc","PI","fillStyle","fill","leftHandLandmarks","drawImage","image","detectGesture","gesture","innerText","smoothLandmarks","enableSegmentation","locateFile","onFrame","regeneratorRuntime","async","_context","prev","next","awrap","send","stop","camera","start"],"mappings":"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","file":"record_data.min.js","sourcesContent":["import DeviceDetector from \"https://cdn.skypack.dev/device-detector-js@2.2.10\";\r\n\r\n// ตรวจสอบว่าใช้ Chrome หรือไม่\r\nfunction testSupport(supportedDevices) {\r\n  const deviceDetector = new DeviceDetector();\r\n  const detectedDevice = deviceDetector.parse(navigator.userAgent);\r\n  if (!supportedDevices.some(device => new RegExp(`^${device.client}$`).test(detectedDevice.client.name))) {\r\n    alert(`This demo, running on ${detectedDevice.client.name}, is not well supported.`);\r\n  }\r\n}\r\ntestSupport([{ client: \"Chrome\" }]);\r\n\r\n// โหลด MediaPipe\r\nconst videoElement = document.querySelector(\".input_video\");\r\nconst canvasElement = document.querySelector(\".output_canvas\");\r\nconst canvasCtx = canvasElement.getContext(\"2d\");\r\nconst outputText = document.getElementById(\"outputText\");\r\n\r\nconst holistic = new window.Holistic({\r\n  locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/holistic@latest/${file}`,\r\n});\r\n\r\nholistic.setOptions({\r\n  modelComplexity: 1,\r\n  smoothLandmarks: true,\r\n  enableSegmentation: true,\r\n  refineFaceLandmarks: true,\r\n  minDetectionConfidence: 0.9,\r\n  minTrackingConfidence: 0.9,\r\n});\r\n\r\nfunction distance(p1, p2) {\r\n  return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\n}\r\n\r\nfunction detectGesture(leftHand, rightHand) {\r\n  if (rightHand && leftHand) {\r\n    const wristRight = rightHand[0];\r\n    const indexRight = rightHand[8];\r\n    const thumbRight = rightHand[4];\r\n    const middleRight = rightHand[12];\r\n    const wristLeft = leftHand[0];\r\n    const indexLeft = leftHand[8];\r\n    const thumbLeft = leftHand[4];\r\n    const middleLeft = leftHand[12];\r\n\r\n    // ตรวจจับคำว่า \"เศร้า\" จากการเคลื่อนไหวมือจากหน้าผากลง\r\n    if (wristRight.y < 0.2 && distance(indexRight, wristRight) > 0.1) {\r\n      return \"เศร้า\";  // หากมือเคลื่อนจากหน้าผากลงไป\r\n    }\r\n\r\n    // ตรวจจับคำว่า \"ขอโทษ\" จากการยกมือขึ้นพนม\r\n    if (wristRight.y < 0.2 && wristLeft.y < 0.2 && distance(indexRight, wristRight) < 0.05 && distance(indexLeft, wristLeft) < 0.05 &&\r\n        distance(thumbRight, indexRight) < 0.05 && distance(thumbLeft, indexLeft) < 0.05) {\r\n      return \"ขอโทษ\";  // ตรวจจับจากการยกมือขึ้นในท่าพนมมือ\r\n    }\r\n\r\n    // เงื่อนไขท่าทางอื่นๆ ที่มีอยู่แล้ว\r\n    if (wristRight.y < 0.3 && distance(wristRight, indexRight) < 0.05) {\r\n      return \"สวัสดี\";\r\n    }\r\n    if (thumbRight.y < indexRight.y && indexRight.y < middleRight.y) {\r\n      return \"ใช่\";\r\n    }\r\n    if (thumbRight.y > indexRight.y && indexRight.y > middleRight.y) {\r\n      return \"ไม่\";\r\n    }\r\n    if (distance(thumbRight, pinkyRight) < 0.05 && distance(indexRight, pinkyRight) < 0.05) {\r\n      return \"โอเค\";\r\n    }\r\n    if (thumbRight.y < 0.4 && wristRight.y < 0.5) {\r\n      return \"ขอบใจ\";\r\n    }\r\n    if (distance(indexRight, middleRight) < 0.03 && distance(middleRight, ringRight) < 0.03) {\r\n      return \"เยี่ยม\";\r\n    }\r\n    if (distance(thumbRight, indexRight) > 0.1 && distance(indexRight, middleRight) > 0.1) {\r\n      return \"รัก\";\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction onResults(results) {\r\n  canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\r\n  canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);\r\n\r\n  if (results.rightHandLandmarks) {\r\n    results.rightHandLandmarks.forEach(point => {\r\n      canvasCtx.beginPath();\r\n      canvasCtx.arc(point.x * canvasElement.width, point.y * canvasElement.height, 5, 0, 2 * Math.PI);\r\n      canvasCtx.fillStyle = \"blue\";\r\n      canvasCtx.fill();\r\n    });\r\n  }\r\n\r\n  if (results.leftHandLandmarks) {\r\n    results.leftHandLandmarks.forEach(point => {\r\n      canvasCtx.beginPath();\r\n      canvasCtx.arc(point.x * canvasElement.width, point.y * canvasElement.height, 5, 0, 2 * Math.PI);\r\n      canvasCtx.fillStyle = \"red\";\r\n      canvasCtx.fill();\r\n    });\r\n  }\r\n\r\n  if (results.leftHandLandmarks || results.rightHandLandmarks) {\r\n    const gesture = detectGesture(results.leftHandLandmarks, results.rightHandLandmarks);\r\n    if (gesture) {\r\n      outputText.innerText = `แปลภาษามือ: ${gesture}`;\r\n    }\r\n  }\r\n}\r\n\r\nholistic.onResults(onResults);\r\n\r\nconst camera = new Camera(videoElement, {\r\n  onFrame: async () => {\r\n    await holistic.send({ image: videoElement });\r\n  },\r\n  width: 640,\r\n  height: 480,\r\n});\r\ncamera.start();\r\n"]}